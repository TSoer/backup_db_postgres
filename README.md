# backup_db_postgres
Аналог pg_dump


Ограниченный Python-дампер PostgreSQL с помошью psycopg2 без pg_dump.
Поддерживает Postgres >= 10 (фокус 12–15), UTF-8, дамп типов (ENUM/DOMAIN/COMPOSITE),
последовательностей, таблиц, данных (COPY-стиль), индексов, ограничений,
представлений/материализованных представления, функций/процедур, триггеров, комментариев, GRANT'ов и базовых ролей.

Исключено по требованию: CREATE POLICY (RLS), публикации/подписки, внешние серверы/таблицы.

Ключевые фиксы vs ранее присланная версия:
- Пролог идентичен pg_dump: SET statement_timeout/lock_timeout/...; search_path=''; row_security=off.
- Разделены этапы: CREATE SEQUENCE (до таблиц) и ALTER SEQUENCE ... OWNED BY (после объектов) — чтобы не падало nextval().
- Состояние последовательностей (setval) берётся из реального last_value/is_called каждой sequence, а не из seqstart.
- Включён дамп пользовательских типов до таблиц.

Проверял на базах не доведенных до 3 формы. количество таблий ~120.
